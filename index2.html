<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kartik Dubey</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  overflow:hidden;
}

/* ================= INTRO OVERLAY ================= */

#intro{
  position:fixed;
  inset:0;
  background:#050505;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:9999;
  transition:opacity 1s ease, visibility 1s ease;
  cursor:pointer;
}

#intro.hide{
  opacity:0;
  visibility:hidden;
}

#intro button{
  position:relative;
  z-index:2;
  margin-top:40px;
  padding:12px 28px;
  background:#007bff;
  border:none;
  color:white;
  font-size:16px;
  border-radius:6px;
  cursor:pointer;
}

#canvas{
  position:absolute;
  inset:0;
}
</style>
</head>

<body>

<!-- INTRO OVERLAY -->
<div id="intro">
  <canvas id="canvas"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", () => {
  resizeCanvas();
  initParticles();
});

const text = "KARTIK DUBEY";
let particles = [];

function initParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const fontSize = canvas.width < 600 ? 60 : 120;

  ctx.fillStyle="white";
  ctx.font=`bold ${fontSize}px Arial`;
  ctx.textAlign="center";
  ctx.fillText(text, canvas.width/2, canvas.height/2);

  const data = ctx.getImageData(0,0,canvas.width,canvas.height);
  ctx.clearRect(0,0,canvas.width,canvas.height);

  particles = [];

  for(let y=0;y<canvas.height;y+=5){
    for(let x=0;x<canvas.width;x+=5){
      const index=(y*canvas.width+x)*4;
      if(data.data[index+3]>128){
        particles.push({
          x:x,
          y:y,
          baseX:x,
          baseY:y
        });
      }
    }
  }
}

initParticles();

let mouse = { x:null, y:null, radius:100 };

window.addEventListener("mousemove", function(e){
  mouse.x = e.clientX;
  mouse.y = e.clientY;
});

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  particles.forEach(p=>{
    let dx = mouse.x - p.x;
    let dy = mouse.y - p.y;
    let distance = Math.sqrt(dx*dx + dy*dy);

    if(distance < mouse.radius){
      let angle = Math.atan2(dy, dx);
      let force = (mouse.radius - distance) / mouse.radius;
      p.x -= Math.cos(angle) * force * 8;
      p.y -= Math.sin(angle) * force * 8;
    } else {
      p.x += (p.baseX - p.x) * 0.05;
      p.y += (p.baseY - p.y) * 0.05;
    }

    ctx.fillStyle = "#007bff";
    ctx.beginPath();
    ctx.arc(p.x, p.y, 1.5, 0, Math.PI * 2);
    ctx.fill();
  });

  requestAnimationFrame(animate);
}

animate();

/* REDIRECT */
function enterPortfolio(event){
  event.stopPropagation();
  fadeAndRedirect();
}

document.getElementById("intro").addEventListener("click", function(){
  fadeAndRedirect();
});

function fadeAndRedirect(){
  document.getElementById("intro").classList.add("hide");

  setTimeout(() => {
    window.location.href = "index.html";
  }, 900);
}
</script>

</body>
</html>